import{av as U,aw as I,x as P,_ as d,aM as x,ax as w,aT as R,o as S,c as A,w as l,e,aK as $,aL as q,Y as C,X as n,W as p,aO as F,z as f,aU as h,I as L,aW as O,d as k,H as W,h as _,t as y,aP as z,r as H,aV as K}from"./index-f8fc41f9.js";import{l as X}from"./lojas-d0037ecf.js";const Y=U("rankingvendedores",{state:()=>({rankingvendedores:[]}),getters:{getRankingVendedores(r){return r.rankingvendedores}},actions:{async list(r){try{const o=await I.get("/rankingvendedores",{params:r});this.rankingvendedores=o.data.rankingVendedores}catch(o){alert(o),console.log(o)}}}}),E=_(" Pesquisar "),G=["colspan"],ee=P({setup(r){const o=Y(),s=z("filters"),u=d("TO"),c=d(x(new Date,"dd/MM/yyyy")),m=d(x(new Date,"dd/MM/yyyy")),b=w(()=>o.rankingvendedores);w(()=>{let g=0;return b.value.map(t=>{g+=t.vlrTotal}),g});function v(){o.list({loja:u.value,data1:s==null?void 0:s.convertDate(c.value),data2:s==null?void 0:s.convertDate(m.value)})}R(()=>{v()});const T=[{key:"loja",order:"asc"}],j=[{title:"Posição",align:"left",key:"posicao"},{title:"Vendedor(a)",align:"left",key:"Nomabv"},{title:"Total",align:"left",key:"total"}],V=d("");return d({title:"Ranking de Vendas"}),(g,t)=>{const B=H("Alert"),D=K("mask");return S(),A(C,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e($,null,{default:l(()=>[e(q,{class:"pa-5"},{default:l(()=>[e(C,null,{default:l(()=>[e(n,{cols:"12",lg:"6",md:"6"},{default:l(()=>[e(p,{"base-color":"#000",modelValue:V.value,"onUpdate:modelValue":t[0]||(t[0]=a=>V.value=a),label:"Pesquisar","hide-details":""},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",lg:"6",md:"6"},{default:l(()=>[e(F,{label:"Loja",modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=a=>u.value=a),items:f(X),"hide-details":"",onBlur:t[2]||(t[2]=a=>v()),"item-title":"descricao","item-value":"id","base-color":"#000"},null,8,["modelValue","items"])]),_:1}),e(n,{cols:"12",lg:"5",md:"6"},{default:l(()=>[h(e(p,{"base-color":"#000",modelValue:c.value,"onUpdate:modelValue":t[3]||(t[3]=a=>c.value=a),label:"Data Inicial","hide-details":""},null,8,["modelValue"]),[[D,["##/##/####"]]])]),_:1}),e(n,{cols:"12",lg:"5",md:"6"},{default:l(()=>[h(e(p,{"base-color":"#000",modelValue:m.value,"onUpdate:modelValue":t[4]||(t[4]=a=>m.value=a),label:"Data Final","hide-details":""},null,8,["modelValue"]),[[D,["##/##/####"]]])]),_:1}),e(n,{cols:"12",lg:"2",md:"2"},{default:l(()=>[e(L,{color:"primary",onClick:t[5]||(t[5]=a=>v())},{default:l(()=>[E]),_:1})]),_:1})]),_:1}),e(B,{ref:"alert"},null,512),e(O,{class:"elevation-3 mt-5",headers:j,items:f(b),title:"Assinaturas","item-value":"name",search:V.value,"group-by":T,density:"compact","no-data-text":"Nada consta na base dados"},{"group-header":l(({item:a,columns:i,toggleGroup:M,isGroupOpen:N})=>[k("tr",null,[k("td",{colspan:i.length},[e(W,{onClick:J=>M(a)},{default:l(()=>[_(y(N(a)?"mdi-minus":"mdi-plus"),1)]),_:2},1032,["onClick"]),k("strong",null,y(a.value),1)],8,G)])]),"item.total":l(({item:a})=>{var i;return[_(y((i=f(s))==null?void 0:i.currency(a.total)),1)]}),_:1},8,["headers","items","search"])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{ee as default};
